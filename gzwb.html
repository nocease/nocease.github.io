<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="css/mui.min.css" rel="stylesheet" />
		<script src="js/mui.min.js"></script>
		<script type="text/javascript">
			mui.init()
		</script>
	</head>
	<body>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">微博-最近访客</h1>
		</header>
		<div class="mui-content">
			<ul class="mui-table-view" id="ul">

			</ul>
		</div>
	</body>
	<script type="text/javascript">
		//获取微博访客
		mui.ajax('https://e-cology.com.cn/api/blog/base/getVisitorList?recordType=visit&currentPage=1&pageSize=100', {
			dataType: 'json', //服务器返回json格式数据
			type: 'get', //HTTP请求类型
			timeout: 10000, //超时时间设置为10秒；
			async: true,
			headers: {
				"accept": "*/*",
				"pragma": "no-cache"
			},
			success: function(data) {
				mui(data.list).each(function(index, element) {
					document.getElementById("ul").innerHTML +=
						'<li class="mui-table-view-cell mui-media"><a href="#"><img class="mui-media-object mui-pull-left" src="https://e-cology.com.cn' +
						element.imageUrl + '"><div class="mui-media-body">' + element.lastname + '<p class="mui-ellipsis">来访时间：' +
						element.visitdatetime + '</p></div></a></li>';
				})
			}
		});
	</script>
</html>
